<!DOCTYPE html>

<html>
    <head>
        <title>Kick Fighter</title>
        <script src = "/bower_components/jquery/dist/jquery.js"></script>
        <script src = "/bower_components/underscore/underscore.js"></script>
        <script src= "/node_modules/pixi.js/dist/pixi.min.js"></script>
        <script src = "/socket.io/socket.io.js"></script>
        <script src = "/public/app/app.js"></script>
        <script src = "/public/app/deathAnimation.js"></script>
        <script src= "/public/app/assets.js"></script>
        <script src = "/public/app/drawer.js"></script>
        <script src = "/public/app/game.js"></script>
        <script src = "/public/app/gamePad.js"></script>
        <script src = "/public/app/ai.js"></script>
        <script src = "/public/app/index.js"></script>
    </head>
    <body>
        <div id="stage" style="border: solid 1px silver; width: 1280"></div>
        <% if(ai) { %>
        <div style="float: left; border: solid 1px silver; padding: 3px; margin-top: 10px;">
            <textarea id="ai" rows="35" cols="55" style="border: none; font-size: 16px; font-family: monospace;">
            </textarea><br/>
            <hr/>
            <input type="button" id="loadScript" value="start bot" />
            <input type="button" id="loadDefault" value="load deafault script" />
        </div>
        <% } %>
        <script id="defaultAIScript" type="aiscript">
            (function() {
                function tick(you, them) {
                    //if you is false then you are not spawned at this point.
                    //return up, left, right to spawn
                    if(you) {
                        return "up";
                    }
                    //console.log(you);
                    //console.log(them);
                    //return "left";
                    //return "right";
                    //return "down";
                    //return false;
                    return "up";
                }

                app.ai = {};
                app.ai.tick = tick;
            })();
        </script>
        <script>
            function loadDefaultAIScript() {
                $("#ai").val($("#defaultAIScript").html());
            }
            $(function() {
                if(localStorage.ai) {
                    $("#ai").val(localStorage.ai);
                } else {
                    loadDefaultAIScript();
                }

                $("#loadScript").click(function() {
                    $(".ai").remove();
                    var code = $("#ai").val();
                    localStorage.ai = code;
                    var scriptToAppend = $('<script class="ai"><\/script>');
                    scriptToAppend.html(code);
                    scriptToAppend.appendTo("body");
                });
            });
        </script>
    </body>
</html>
